generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                String            @id @default(cuid())
  account_id        Int?
  session_id        Int?
  name              String            @unique
  password          String?
  email             String            @unique
  emailVerified     DateTime?
  image             String?
  dtm_createAt      DateTime          @default(now())
  dtm_updatedAt     DateTime          @updatedAt
  username          String?           @unique
  cards             Cartao[]
  categories        Categoria[]
  purchaseDecisions DesicaoDeCompra[]
  wishLists         ListaDeDesejos[]
  transacions       Transacao[]
  accounts          Account[]
  sessions          Session[]

  @@map("users")
}

model Account {
  userId            String  @map("user_id")
  type              String
  provider          String
  providerAccountId String  @map("provider_account_id")
  refresh_token     String?
  access_token      String?
  scope             String?
  id_token          String?
  session_state     String?
  expires_at        Int?
  id                String  @id @default(cuid())
  token_type        String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  sessionToken String   @unique @map("session_token")
  userId       String   @map("user_id")
  expires      DateTime
  id           String   @id @default(cuid())
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@unique([identifier, token])
  @@map("verificationtokens")
}

model Transacao {
  str_category_id            Int
  str_name                   String
  dbl_valor                  Float
  str_description            String?
  bool_installment           Boolean?
  int_installmentCount       Int?
  dtm_currentInstallmentDate DateTime?
  str_card_id                Int
  str_status                 String
  dtm_data                   DateTime
  str_brokerName             String?
  dtm_createAt               DateTime          @default(now())
  dtm_updateAt               DateTime          @updatedAt
  bool_active                Boolean
  id                         Int               @id @default(autoincrement())
  user_id                    String
  str_transactionType        TipoTransacao
  str_movimentType           TipoMovimento
  str_investimentType        TipoInvestimento?
  int_paymentForm            Int
  int_currentInstallment     Int?
  tipoPagamento              TipoPagamento     @relation(fields: [int_paymentForm], references: [id])
  card                       Cartao            @relation(fields: [str_card_id], references: [card_id])
  category                   Categoria         @relation(fields: [str_category_id], references: [category_id])
  user                       User              @relation(fields: [user_id], references: [id])
}

model Categoria {
  category_id         Int               @id @default(autoincrement())
  str_categoryName    String
  str_movimentType    String
  bool_hasBudgetLimit Boolean
  dbl_budgetLimit     Float?
  str_image           String?
  dtm_createAt        DateTime          @default(now())
  dtm_updateAt        DateTime          @updatedAt
  bool_active         Boolean
  user_id             String
  user                User              @relation(fields: [user_id], references: [id])
  purchaseDecisions   DesicaoDeCompra[]
  transactions        Transacao[]
}

model Cartao {
  card_id            Int         @id @default(autoincrement())
  str_transaction_id Int?
  str_bank_id        Int
  dbl_creditLimit    Float
  dtm_dueDate        DateTime
  str_lastNumbers    String
  dtm_createAt       DateTime    @default(now())
  dtm_updateAt       DateTime    @updatedAt
  bool_active        Boolean
  str_user_id        String
  int_bestDate       Int?        @db.SmallInt
  bank               Banco       @relation(fields: [str_bank_id], references: [bank_id])
  user               User        @relation(fields: [str_user_id], references: [id])
  transactions       Transacao[]
}

model Banco {
  bank_id      Int      @id @default(autoincrement())
  str_bankName String
  str_image    String?
  dtm_createAt DateTime @default(now())
  dtm_updateAt DateTime @updatedAt
  bool_active  Boolean
  str_card_id  Cartao[]
}

model TipoPagamento {
  id               Int         @id @default(autoincrement())
  str_nomeTipoPgto String
  dtm_createAt     DateTime    @default(now())
  dtm_updateAt     DateTime    @updatedAt
  bool_active      Boolean
  str_descricao    String?
  transactions     Transacao[]
}

model ListaDeDesejos {
  id                  Int               @id @default(autoincrement())
  str_user_id         String
  str_wishName        String
  str_wishDescription String?
  dbl_wishValue       Float
  str_image           String?
  dtm_createAt        DateTime          @default(now())
  dtm_updateAt        DateTime          @updatedAt
  purchaseDecisions   DesicaoDeCompra[]
  user                User              @relation(fields: [str_user_id], references: [id])
}

model DesicaoDeCompra {
  id                    Int             @id @default(autoincrement())
  str_user_id           String
  int_category_id       Int?
  int_wishList_id       Int?
  str_brand             String?
  str_descriptionOrLink String?
  bool_doIHaveMoney     Boolean
  bool_doIReallyNeed    Boolean
  bool_doIPlanned       Boolean
  dtm_createAt          DateTime        @default(now())
  dtm_updateAt          DateTime        @updatedAt
  dbl_valor             Float
  str_name              String
  category              Categoria?      @relation(fields: [int_category_id], references: [category_id])
  wishList              ListaDeDesejos? @relation(fields: [int_wishList_id], references: [id])
  user                  User            @relation(fields: [str_user_id], references: [id])
}

enum TipoTransacao {
  Fixed
  Variable
  Income
  Investiment
  DividendReturn
}

enum TipoMovimento {
  Input
  Output
}

enum TipoInvestimento {
  Poupanca
  TesouroDireto
  Debentures
  FundoDeAcoes
  Acoes
  AcoesPreferencias
  AcoesOrdinarias
  Futuros
  FundoCambial
  FundoDeDividaExterna
  FundoDeVentureCapital
  Cambio
  PrecificacaoDeCarbono
  Securitizacao
  MoedasDigitaisCBDCs
  InvestimentoEmArte
  Imoveis
  P2PLending
  InvestimentoSocial
  FundosLongAndShort
  FundosDeInvestimentoImobiliario
  FundoDeInvestimentoEmCadeiasAgroindustriais
  LetrasDeCreditoDoAgronegocio
  LetrasDeCreditoImobiliario
  Criptomoedas
  OpcoesBancarias
  PrevidenciaPrivada
  CertificadoDeDepositoBancario
  CertificadosDeOperacoesEstruturadas
  FundoDeIndiceETFs
  StocksEOuAcoesInternacionais
  Commodities
  FundoMultimercado
  Crowdfunding
  LetraFinanceira
  TitulosPublicos
  BonusDeSubscricao
  Derivativos
  Outros
}
